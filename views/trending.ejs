<%- include('partials/header') %>

<h1 class="text-2xl font-bold mb-4">Trending Posts</h1>
<div id="trending-posts" class="mt-6">
  <!-- Trending posts will be dynamically loaded here -->
</div>

<script>
  async function fetchTrendingPosts() {
    const response = await fetch('/api/posts/trending');
    const posts = await response.json();
    const trendingDiv = document.getElementById('trending-posts');
    trendingDiv.innerHTML = '';
    for (const post of posts) {
      trendingDiv.innerHTML += `
        <div class="bg-blue-50 p-4 rounded-lg mb-4">
          <p><strong>${post.username}</strong>: ${post.content}</p>
          ${post.link ? `<a href="${post.link}" class="text-blue-600" target="_blank">Link</a>` : ''}
          <p class="text-gray-500 text-sm">${new Date(post.created_at).toLocaleString()}</p>
          <div class="mt-2">
            <button id="like-${post.id}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Like</button>
            <button id="share-${post.id}" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Share</button>
            <button id="follow-${post.id}" class="bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700">Follow</button>
          </div>
        </div>
      `;
    }
  }

  fetchTrendingPosts();
</script>

<%- include('partials/footer') %>
